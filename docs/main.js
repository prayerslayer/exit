!function(t){var e={};function i(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=2)}([function(t,e,i){t.exports=i.p+"9293bf915a281fb4ce5ada41ec374da5.png"},function(t,e,i){t.exports=i.p+"478050cfb4486530f4bbdf685ea12637.png"},function(t,e,i){"use strict";i.r(e),i(3);var n=i(0),s=i.n(n),r=i(1),a=i.n(r);kontra.init();const o=10;let h=kontra.tileEngine({tileWidth:64,tileHeight:64,width:10,height:10});!function(t){let e=document.createElement("img");e.src=s.a,e.onload=function(){t.addTilesets({image:e}),t.addLayers({name:"ground",data:[0,2,3,0,0,0,0,0,0,0,0,6,7,7,8,0,0,0,0,6,27,24,24,25,0,0,0,0,23,24,24,24,26,8,0,0,0,23,24,24,24,24,26,8,0,0,23,24,24,24,24,24,25,0,0,40,41,41,10,24,24,25,0,0,0,0,0,40,41,41,42,0,0,0,0,0,0,0,0,0,0]})}}(h);let c=function(t){const e=function(t){let e=document.createElement("img");return e.src=a.a,t.spriteSheet({image:e,frameWidth:72,frameHeight:97,animations:{walk:{frames:"0..9",frameRate:30},idle:{frames:1}}})}(t);return t.sprite({width:200,height:100,speed:3,x:20,y:20,color:"red",animations:e.animations,meta:{type:"player"},previously:{x:20,y:20,speed:3}})}(kontra);const d=[...new Array(1).fill(0).map((t,e)=>e).map(()=>(function(t){return t.sprite({width:o,height:o,speed:1,x:Math.floor(Math.random()*t.canvas.width),y:Math.floor(Math.random()*t.canvas.height),color:"black",meta:{type:"person",id:Math.floor(1e3*Math.random())+"",lastDirectionChange:Date.now()-1e5},previously:{x:0,y:0},dx:2,dy:2,reset:{dx:!1,dy:!1},update:function(){const t=Date.now();if(Object.keys(this.reset).forEach(e=>{this.reset[e]&&t-this.reset[e]>0&&(this[e]=this.previously[e],this.reset[e]=!1)}),t-this.meta.lastDirectionChange>5e3){const[e,i]={0:[1,0],1:[0,1],2:[-1,0],3:[0,-1]}[Math.floor(4*Math.random())];this.dy=i*(0===this.dy?this.speed:this.dy),this.dx=e*(0===this.dx?this.speed:this.dx),this.meta.lastDirectionChange=t}this.previously.x=this.x,this.previously.y=this.y,this.x+=this.dx,this.y+=this.dy}})})(kontra)),c];kontra.gameLoop({update:function(){!function(t){t.x,t.previously.x,t.y,t.previously.y,t.animations.idle.update()}(c),d.forEach(t=>{t.update(),t.x<0&&(t.x=t.width,t.dx*=-1),t.y<0&&(t.y=t.height,t.dy*=-1),t.x>kontra.canvas.width&&(t.x=kontra.canvas.width-t.width,t.dx*=-1),t.y>kontra.canvas.height&&(t.y=kontra.canvas.height-t.height,t.dy*=-1)})},render:function(){h.render(),function(t,e){e.previously.x=e.x,e.previously.y=e.y,t.keys.pressed("left")&&(e.x-=e.speed),t.keys.pressed("right")&&(e.x+=e.speed),t.keys.pressed("up")&&(e.y-=e.speed),t.keys.pressed("down")&&(e.y+=e.speed)}(kontra,c),d.forEach(t=>t.render())}}).start()},function(t,e){kontra={init(t){var e=this.canvas=document.getElementById(t)||t||document.querySelector("canvas");if(!e)throw Error("You must provide a canvas element for the game");this.context=e.getContext("2d")},_noop:new Function,_tick:new Function},function(){let t,e=/(jpeg|jpg|gif|png)$/,i=/(wav|mp3|ogg|aac)$/,n=/^no$/,s=/^\//,r=/\/$/,a=new Audio,o={wav:"",mp3:a.canPlayType("audio/mpeg;").replace(n,""),ogg:a.canPlayType('audio/ogg; codecs="vorbis"').replace(n,""),aac:a.canPlayType("audio/aac;").replace(n,"")};function h(t,e){return[t.replace(r,""),t?e.replace(s,""):e].filter(t=>t).join("/")}function c(t){return t.split(".").pop()}function d(t){let e=t.replace("."+c(t),"");return 2==e.split("/").length?e.replace(s,""):e}function u(e,i){return new Promise(function(n,s){let r=new Image;i=h(t.imagePath,e),r.onload=function(){t.images[d(e)]=t.images[i]=this,n(this)},r.onerror=function(){s("Unable to load image "+i)},r.src=i})}function l(e,i,n){return new Promise(function(s,r){if(e=[].concat(e).reduce(function(t,e){return o[c(e)]?e:t},n)){let n=new Audio;i=h(t.audioPath,e),n.addEventListener("canplay",function(){t.audio[d(e)]=t.audio[i]=this,s(this)}),n.onerror=function(){r("Unable to load audio "+i)},n.src=i,n.load()}else r("cannot play any of the audio formats provided"+e)})}function f(e,i){return i=h(t.dataPath,e),fetch(i).then(function(t){if(!t.ok)throw t;return t.clone().json().catch(function(){return t.text()})}).then(function(n){return t.data[d(e)]=t.data[i]=n,n})}t=kontra.assets={images:{},audio:{},data:{},imagePath:"",audioPath:"",dataPath:"",load(){let t,n,s,r,a,o=[];for(r=0;s=arguments[r];r++)a=(n=c(t=[].concat(s)[0])).match(e)?u(s):n.match(i)?l(s):f(s),o.push(a);return Promise.all(o)},_canUse:o}}(),kontra.gameLoop=function(t){if(!(t=t||{}).update||!t.render)throw Error("You must provide update() and render() functions");let e,i,n,s,r=t.fps||60,a=0,o=1e3/r,h=1/r,c=!1===t.clearCanvas?kontra._noop:function(){kontra.context.clearRect(0,0,kontra.canvas.width,kontra.canvas.height)};function d(){if(i=requestAnimationFrame(d),n=performance.now(),s=n-e,e=n,!(s>1e3)){for(kontra._tick(),a+=s;a>=o;)u.update(h),a-=o;c(),u.render()}}let u={update:t.update,render:t.render,isStopped:!0,start(){e=performance.now(),this.isStopped=!1,requestAnimationFrame(d)},stop(){this.isStopped=!0,cancelAnimationFrame(i)},_frame:d,set _last(t){e=t}};return u},function(){let t={},e={},n={13:"enter",27:"esc",32:"space",37:"left",38:"up",39:"right",40:"down"};for(let t=0;t<26;t++)n[65+t]=(10+t).toString(36);for(i=0;i<10;i++)n[48+i]=""+i;addEventListener("keydown",function(i){let s=n[i.which];e[s]=!0,t[s]&&t[s](i)}),addEventListener("keyup",function(t){e[n[t.which]]=!1}),addEventListener("blur",function(t){e={}}),kontra.keys={bind(e,i){[].concat(e).map(function(e){t[e]=i})},unbind(e,i){[].concat(e).map(function(e){t[e]=i})},pressed:t=>!!e[t]}}(),function(){let t,e=[],i=[],n={},s=[],r={},a={0:"left",1:"middle",2:"right"};function o(e){let i=t.x-Math.max(e.x,Math.min(t.x,e.x+e.width)),n=t.y-Math.max(e.y,Math.min(t.y,e.y+e.height));return i*i+n*n<t.radius*t.radius}function h(){let n,s,r=i.length?i:e;for(let e=r.length-1;e>=0;e--)if(s=(n=r[e]).collidesWithPointer?n.collidesWithPointer(t):o(n))return n}function c(t){r[a[t.button]]=!0,u(t,"onDown")}function d(t){r[a[t.button]]=!1,u(t,"onUp")}function u(e,i){if(!kontra.canvas)return;let s,r,a;-1!==e.type.indexOf("mouse")?(s=e.clientX,r=e.clientY):(s=(e.touches[0]||e.changedTouches[0]).clientX,r=(e.touches[0]||e.changedTouches[0]).clientY),t.x=s-kontra.canvas.offsetLeft,t.y=r-kontra.canvas.offsetTop,e.target===kontra.canvas&&(a=h())&&a[i]&&a[i](),n[i]&&n[i](e,a)}addEventListener("mousedown",c),addEventListener("touchstart",c),addEventListener("mouseup",d),addEventListener("touchend",d),addEventListener("blur",function(t){r={}}),addEventListener("mousemove",function(t){u(t,"onOver")}),t=kontra.pointer={x:0,y:0,radius:5,track(t){[].concat(t).map(function(t){t._r||(t._r=t.render,t.render=function(){e.push(this),this._r()},s.push(t))})},untrack(t,e){[].concat(t).map(function(t){t.render=t._r,t._r=e;let i=s.indexOf(t);-1!==i&&s.splice(i,1)})},over:t=>-1!==s.indexOf(t)&&h()===t,onDown(t){n.onDown=t},onUp(t){n.onUp=t},pressed:t=>!!r[t]},kontra._tick=function(){i.length=0,e.map(function(t){i.push(t)}),e.length=0}}(),kontra.pool=function(t){let e,i=0;if(!(t=t||{}).create||!(e=t.create())||!(e.update&&e.init&&e.isAlive))throw Error("Must provide create() function which returns an object with init(), update(), and isAlive() functions");return{_c:t.create,objects:[t.create()],size:1,maxSize:t.maxSize||1/0,get(t){if(t=t||{},this.objects[0].isAlive()){if(this.size===this.maxSize)return;for(let t=0;t<this.size&&this.objects.length<this.maxSize;t++)this.objects.unshift(this._c());this.size=this.objects.length}let e=this.objects.shift();e.init(t),this.objects.push(e),i++},getAliveObjects(){return this.objects.slice(this.objects.length-i)},clear(){i=this.objects.length=0,this.size=1,this.objects.push(this._c())},update(t){let e,n=this.size-1,s=Math.max(this.objects.length-i,0);for(;n>=s;)(e=this.objects[n]).update(t),e.isAlive()?n--:(this.objects=this.objects.splice(n,1).concat(this.objects),i--,s++)},render(){let t=Math.max(this.objects.length-i,0);for(let e=this.size-1;e>=t;e--)this.objects[e].render()}}},kontra.quadtree=function(t){return{maxDepth:(t=t||{}).maxDepth||3,maxObjects:t.maxObjects||25,_b:!1,_d:t.depth||0,_p:t.parent,bounds:t.bounds||{x:0,y:0,width:kontra.canvas.width,height:kontra.canvas.height},objects:[],subnodes:[],clear(){this.subnodes.map(function(t){t.clear()}),this._b=!1,this.objects.length=0},get(t){let e,i,n=[];for(;this.subnodes.length&&this._b;){for(e=this._g(t),i=0;i<e.length;i++)n.push.apply(n,this.subnodes[e[i]].get(t));return n}return this.objects},add(){let t,e,i,n;for(e=0;e<arguments.length;e++)if(i=arguments[e],Array.isArray(i))this.add.apply(this,i);else if(this._b)this._a(i);else if(this.objects.push(i),this.objects.length>this.maxObjects&&this._d<this.maxDepth){for(this._s(),t=0;n=this.objects[t];t++)this._a(n);this.objects.length=0}},_a(t,e,i){for(e=this._g(t),i=0;i<e.length;i++)this.subnodes[e[i]].add(t)},_g(t){let e=[],i=this.bounds.x+this.bounds.width/2,n=this.bounds.y+this.bounds.height/2,s=t.y<n&&t.y+t.height>=this.bounds.y,r=t.y+t.height>=n&&t.y<this.bounds.y+this.bounds.height;return t.x<i&&t.x+t.width>=this.bounds.x&&(s&&e.push(0),r&&e.push(2)),t.x+t.width>=i&&t.x<this.bounds.x+this.bounds.width&&(s&&e.push(1),r&&e.push(3)),e},_s(t,e,i){if(this._b=!0,!this.subnodes.length)for(t=this.bounds.width/2|0,e=this.bounds.height/2|0,i=0;i<4;i++)this.subnodes[i]=kontra.quadtree({bounds:{x:this.bounds.x+(i%2==1?t:0),y:this.bounds.y+(i>=2?e:0),width:t,height:e},depth:this._d+1,maxDepth:this.maxDepth,maxObjects:this.maxObjects,parent:this})}}},function(){class t{constructor(t,e){this._x=t||0,this._y=e||0}add(t,e){this.x+=(t.x||0)*(e||1),this.y+=(t.y||0)*(e||1)}clamp(t,e,i,n){this._c=!0,this._a=t,this._b=e,this._d=i,this._e=n}get x(){return this._x}get y(){return this._y}set x(t){this._x=this._c?Math.min(Math.max(this._a,t),this._d):t}set y(t){this._y=this._c?Math.min(Math.max(this._b,t),this._e):t}}kontra.vector=((e,i)=>new t(e,i)),kontra.vector.prototype=t.prototype;class e{init(t,e,i,n){for(e in t=t||{},this.position=kontra.vector(t.x,t.y),this.velocity=kontra.vector(t.dx,t.dy),this.acceleration=kontra.vector(t.ddx,t.ddy),this.width=this.height=0,this.context=kontra.context,t)this[e]=t[e];if(i=t.image)this.image=i,this.width=i.width,this.height=i.height;else if(i=t.animations){for(e in i)this.animations[e]=i[e].clone(),n=n||i[e];this._ca=n,this.width=n.width,this.height=n.height}return this}get x(){return this.position.x}get y(){return this.position.y}get dx(){return this.velocity.x}get dy(){return this.velocity.y}get ddx(){return this.acceleration.x}get ddy(){return this.acceleration.y}set x(t){this.position.x=t}set y(t){this.position.y=t}set dx(t){this.velocity.x=t}set dy(t){this.velocity.y=t}set ddx(t){this.acceleration.x=t}set ddy(t){this.acceleration.y=t}isAlive(){return this.ttl>0}collidesWith(t){return this.x<t.x+t.width&&this.x+this.width>t.x&&this.y<t.y+t.height&&this.y+this.height>t.y}update(t){this.advance(t)}render(){this.draw()}playAnimation(t){this._ca=this.animations[t],this._ca.loop||this._ca.reset()}advance(t){this.velocity.add(this.acceleration,t),this.position.add(this.velocity,t),this.ttl--,this._ca&&this._ca.update(t)}draw(){this.image?this.context.drawImage(this.image,this.x,this.y):this._ca?this._ca.render(this):(this.context.fillStyle=this.color,this.context.fillRect(this.x,this.y,this.width,this.height))}}kontra.sprite=(t=>(new e).init(t)),kontra.sprite.prototype=e.prototype}(),function(){class t{constructor(t,e){t=t||{},this.spriteSheet=t.spriteSheet,this.frames=t.frames,this.frameRate=t.frameRate,this.loop=void 0===t.loop||t.loop,e=t.spriteSheet.frame,this.width=e.width,this.height=e.height,this.margin=e.margin||0,this._f=0,this._a=0}clone(){return kontra.animation(this)}reset(){this._f=0,this._a=0}update(t){if(this.loop||this._f!=this.frames.length-1)for(t=t||1/60,this._a+=t;this._a*this.frameRate>=1;)this._f=++this._f%this.frames.length,this._a-=1/this.frameRate}render(t){t=t||{};let e=this.frames[this._f]/this.spriteSheet._f|0,i=this.frames[this._f]%this.spriteSheet._f|0;(t.context||kontra.context).drawImage(this.spriteSheet.image,i*this.width+(2*i+1)*this.margin,e*this.height+(2*e+1)*this.margin,this.width,this.height,t.x,t.y,this.width,this.height)}}kontra.animation=function(e){return new t(e)},kontra.animation.prototype=t.prototype;class e{constructor(t){if(!(t=t||{}).image)throw Error("You must provide an Image for the SpriteSheet");this.animations={},this.image=t.image,this.frame={width:t.frameWidth,height:t.frameHeight,margin:t.frameMargin},this._f=t.image.width/t.frameWidth|0,this.createAnimations(t.animations)}createAnimations(t){let e,i,n,s;for(s in t){if(i=(e=t[s]).frames,n=[],void 0===i)throw Error("Animation "+s+" must provide a frames property");[].concat(i).map(function(t){n=n.concat(this._p(t))},this),this.animations[s]=kontra.animation({spriteSheet:this,frames:n,frameRate:e.frameRate,loop:e.loop})}}_p(t,e){if(+t===t)return t;let i=[],n=t.split(".."),s=e=+n[0],r=+n[1];if(s<r)for(;e<=r;e++)i.push(e);else for(;e>=r;e--)i.push(e);return i}}kontra.spriteSheet=function(t){return new e(t)},kontra.spriteSheet.prototype=e.prototype}(),kontra.store={set(t,e){void 0===e?localStorage.removeItem(t):localStorage.setItem(t,JSON.stringify(e))},get(t){let e=localStorage.getItem(t);try{e=JSON.parse(e)}catch(t){}return e}},kontra.tileEngine=function(t){if(!(t=t||{}).width||!t.height)throw Error("You must provide width and height properties");function e(t){let e,i;return void 0!==t.x&&void 0!==t.y?(e=w.getRow(t.y),i=w.getCol(t.x)):(e=t.row,i=t.col),e<0||i<0||e>=a||i>=r?-1:i+e*r}function i(t){let e,i,n=0,s=w.tilesets.length-1;for(;n<=s;){if(e=(n+s)/2|0,t>=(i=w.tilesets[e]).firstGrid&&t<=i.lastGrid)return i;i.lastGrid<t?n=e+1:s=e-1}}let n,s,r=t.width,a=t.height,o=t.tileWidth||t.tilewidth||32,h=t.tileHeight||t.tileheight||32,c=r*o,d=a*h,u=t.context||kontra.context,l=u.canvas.width,f=u.canvas.height,p=document.createElement("canvas"),m=p.getContext("2d"),g=Math.max(0,c-l),y=Math.max(0,d-f),x=[],w={width:r,height:a,tileWidth:o,tileHeight:h,mapWidth:c,mapHeight:d,context:u,x:t.x||0,y:t.y||0,tilesets:[],layers:{},addTilesets:function(t){[].concat(t).map(function(t){let e,i,n,s,r,a=t.image;if(""+a===a){let t=1/0;for(;t>=0;){let i=(t=a.lastIndexOf("/",t))<0?a:a.substr(t);if(kontra.assets.images[i]){e=kontra.assets.images[i];break}t--}}else e=a;i=t.firstGrid,n=(e.width/o|0||1)*(e.height/h|0||1),i||(w.tilesets.length>0?(r=((s=w.tilesets[w.tilesets.length-1]).image.width/o|0)*(s.image.height/h|0),i=s.firstGrid+r):i=1),w.tilesets.push({firstGrid:i,lastGrid:i+n-1,image:e}),w.tilesets.sort(function(t,e){return t.firstGrid-e.firstGrid})})},addLayers:function(t){[].concat(t).map(function(t){let e,i,n,s,a,o;if(t.render=void 0===t.render||t.render,Array.isArray(t.data[0]))for(e=[],i=0;n=t.data[i];i++)for(s=0;s<r;s++)e.push(n[s]||0);else e=t.data;for(a in w.layers[t.name]={data:e,zIndex:t.zIndex||0,render:t.render},t.properties){o=t.properties[a];try{o=JSON.parse(o)}catch(t){}w.layers[t.name][a]=o}w.layers[t.name].render&&(x.push(t.name),x.sort(function(t,e){return w.layers[t].zIndex-w.layers[e].zIndex}))}),function(){let t,e,n,s,a,c,d,u,l;for(let f,p=0;f=w.layers[x[p]];p++)for(let p=0,g=f.data.length;p<g;p++)(t=f.data[p])&&(n=(e=i(t)).image,s=p%r*o,a=(p/r|0)*h,c=(u=t-e.firstGrid)%(l=n.width/o)*o,d=(u/l|0)*h,m.drawImage(n,c,d,o,h,s,a,o,h))}()},layerCollidesWith:function(t,i){let n,s=w.getRow(i.y),r=w.getCol(i.x),a=w.getRow(i.y+i.height),o=w.getCol(i.x+i.width);for(let i=s;i<=a;i++)for(let s=r;s<=o;s++)if(n=e({row:i,col:s}),w.layers[t].data[n])return!0;return!1},tileAtLayer:function(t,i){let n=e(i);if(n>=0)return w.layers[t].data[n]},render:function(){w.context.drawImage(p,w.sx,w.sy,l,f,w.x,w.y,l,f)},renderLayer:function(t){let n,s,c,d,u,p,m,g,y,x=w.layers[t],b=w.getRow(),v=w.getCol(),_=e({row:b,col:v}),k=v*o-w.sx,j=b*h-w.sy,M=Math.min(Math.ceil(l/o)+1,r),S=M*Math.min(Math.ceil(f/h)+1,a),E=0;for(;E<S;)(c=x.data[_])&&(u=(d=i(c)).image,n=k+E%M*o,s=j+(E/M|0)*h,g=(p=c-d.firstGrid)%(m=u.width/o)*o,y=(p/m|0)*h,w.context.drawImage(u,g,y,o,h,n,s,o,h)),++E%M==0?_=v+ ++b*r:_++},getRow:function(t){return t=t||0,(w.sy+t)/h|0},getCol:function(t){return t=t||0,(w.sx+t)/o|0},get sx(){return n},get sy(){return s},set sx(t){n=Math.min(Math.max(0,t),g)},set sy(t){s=Math.min(Math.max(0,t),y)},_layerOrder:x};w.sx=t.sx||0,w.sy=t.sy||0,p.width=c,p.height=d;for(let e in t.properties){let i=t.properties[e];try{i=JSON.parse(i)}catch(t){}w[e]=w[e]||i}return t.tilesets&&w.addTilesets(t.tilesets),t.layers&&w.addLayers(t.layers),w}}]);